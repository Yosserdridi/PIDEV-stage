<div *ngIf="student">
  <h2>Internship Convention</h2>

  <!-- Show message if the student already has an internship convention -->
  <div *ngIf="student.internshipConventions && student.internshipConventions.length > 0">
    <p style="color: red;">You already have an internship convention. You cannot add a new one.</p>
  </div>

  <!-- Show form if no internship convention exists -->
  <form *ngIf="!student.internshipConventions || student.internshipConventions.length === 0" 
        (ngSubmit)="addInternship()" #internshipForm="ngForm">

    <div class="form-group">
      <label for="companyName">Company Name:</label>
      <input type="text" id="companyName" [(ngModel)]="internship.companyName" name="companyName" required minlength="3" #companyName="ngModel" />
      <div class="error-message" *ngIf="companyName.invalid && companyName.touched">
        <p *ngIf="companyName.errors?.['required']">Le nom de l'entreprise est requis.</p>
        <p *ngIf="companyName.errors?.['minlength']">Le nom doit contenir au moins 3 caractères.</p>
      </div>
    </div>

    <div class="form-group">
      <label for="startDate">Start Date:</label>
      <input type="date" id="startDate" [(ngModel)]="internship.startDate" name="startDate" required #startDate="ngModel" />
      <div class="error-message" *ngIf="startDate.invalid && startDate.touched">
        <p *ngIf="startDate.errors?.['required']">La date de début est requise.</p>
      </div>
    </div>

    <div class="form-group">
      <label for="endDate">End Date:</label>
      <input type="date" id="endDate" [(ngModel)]="internship.endDate" name="endDate" required #endDate="ngModel" />
      <div class="error-message" *ngIf="endDate.invalid && endDate.touched">
        <p *ngIf="endDate.errors?.['required']">La date de fin est requise.</p>
      </div>
    </div>

    <div class="form-group">
      <label for="companyAddress">Company Address:</label>
      <input type="text" id="companyAddress" [(ngModel)]="internship.companyAddress" name="companyAddress" required minlength="10" #companyAddress="ngModel" />
      <div class="error-message" *ngIf="companyAddress.invalid && companyAddress.touched">
        <p *ngIf="companyAddress.errors?.['required']">L'adresse est requise.</p>
        <p *ngIf="companyAddress.errors?.['minlength']">L'adresse doit contenir au moins 10 caractères.</p>
      </div>
    </div>

    <div class="form-group">
      <label for="companyContact">Company Contact:</label>
      <input type="text" id="companyContact" [(ngModel)]="internship.companyContact" name="companyContact" required minlength="8" #companyContact="ngModel" />
      <div class="error-message" *ngIf="companyContact.invalid && companyContact.touched">
        <p *ngIf="companyContact.errors?.['required']">Le contact est requis.</p>
        <p *ngIf="companyContact.errors?.['minlength']">Le contact doit contenir au moins 8 caractères.</p>
      </div>
    </div>

    <div class="form-group">
      <label for="typeInternship">Type of Internship:</label>
      <select id="typeInternship" [(ngModel)]="internship.typeInternship" name="typeInternship" required #typeInternship="ngModel">
        <option *ngFor="let type of typeInternshipEnum" [value]="type">{{ type }}</option>
      </select>
      <div class="error-message" *ngIf="typeInternship.invalid && typeInternship.touched">
        <p *ngIf="typeInternship.errors?.['required']">Le type de stage est requis.</p>
      </div>
    </div>

    <button type="submit" [disabled]="internshipForm.invalid">Add Internship</button>
  </form>
</div>
